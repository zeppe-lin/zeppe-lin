diff --git a/xorg/xkbswitch/src/Makefile b/xorg/xkbswitch/src/Makefile
index a18cb28..965827a 100644
--- a/xorg/xkbswitch/src/Makefile
+++ b/xorg/xkbswitch/src/Makefile
@@ -2,26 +2,25 @@
 
 include config.mk
 
-all: xkbswitch xkbswitch.1
+all: xkbswitch
 
 .c.o:
-	$(CC) -c $(CPPFLAGS) $(CFLAGS) $<
-
-%: %.pod
-	pod2man -c ' ' -n xkbswitch -r $(VERSION) $^ > $@
+	${CC} -c ${CPPFLAGS} ${CFLAGS} $<
 
 xkbswitch: xkbswitch.o
-	$(CC) -o $@ $(LDFLAGS) $^ $(LDLIBS)
+	${CC} -o $@ ${LDFLAGS} xkbswitch.o
 
 install: all
-	install -m 0755 -Dt $(DESTDIR)$(PREFIX)/bin/     xkbswitch
-	install -m 0644 -Dt $(DESTDIR)$(MANPREFIX)/man1/ xkbswitch.1
+	install -m 0755 -Dt ${DESTDIR}${PREFIX}/bin/     xkbswitch
+	install -m 0644 -Dt ${DESTDIR}${MANPREFIX}/man1/ xkbswitch.1
+	sed -i "s/VERSION/${VERSION}/g" \
+		${DESTDIR}${MANPREFIX}/man/xkbswitch.1
 
 uninstall:
-	rm -f $(DESTDIR)$(PREFIX)/bin/xkbswitch
-	rm -f $(DESTDIR)$(MANPREFIX)/man1/xkbswitch.1
+	rm -f ${DESTDIR}${PREFIX}/bin/xkbswitch
+	rm -f ${DESTDIR}${MANPREFIX}/man1/xkbswitch.1
 
 clean:
-	rm -f xkbswitch xkbswitch.o xkbswitch.1
+	rm -f xkbswitch xkbswitch.o
 
 .PHONY: all install uninstall clean
diff --git a/xorg/xkbswitch/src/config.mk b/xorg/xkbswitch/src/config.mk
index 9b83ce3..b80a7f1 100644
--- a/xorg/xkbswitch/src/config.mk
+++ b/xorg/xkbswitch/src/config.mk
@@ -5,16 +5,20 @@ VERSION ?= git
 
 # paths
 PREFIX = /usr/local
-MANPREFIX = $(PREFIX)/share/man
+MANPREFIX = ${PREFIX}/share/man
 
-X11INC = /usr/X11R6/include
-X11LIB = /usr/X11R6/lib
+X11INC = /usr/local/include
+X11LIB = /usr/local/lib
+
+# includes and libs
+INCS = -I${X11INC}
+LIBS = -L${X11LIB} -lX11
 
 # flags
-CPPFLAGS = -I$(X11INC) -D_DEFAULT_SOURCE
+CPPFLAGS = -D_DEFAULT_SOURCE -D_BSD_SOURCE -D_POSIX_C_SOURCE=200809L \
+	   -DVERSION=\"${VERSION}\" ${INCS}
 CFLAGS = -std=c99 -pedantic -Wall -Wextra
-LDFLAGS = -L$(X11LIB)
-LDLIBS = -lX11
+LDFLAGS = ${LIBS}
 
 # compiler and linker
 CC = cc
